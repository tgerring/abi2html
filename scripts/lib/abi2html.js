"use strict";var OperatorEnum={Eq:"=",Neq:"<>",GT:">",GTEq:">=",LT:"<",LTEq:"<=",Contain:"contains"},AbiHtml=function(t){var e;"string"==typeof t?"["==t.trim().substring(0,1)?e=JSON.parse(t):(e=this.FromRegex(t),this.source=t):"object"==typeof abiString&&(e=t),e&&this.constructor(e)};AbiHtml.prototype.constructor=function(t){if(null==t||!t instanceof Array)return null;this.abi=t,this.contract=web3.eth.contract(t),this.functions=[],this.events=[];for(var e=0;e<t.length;e++){var n=t[e];if("object"==typeof n&&"type"in n){var i;switch(n.type){case"function":i=new EvmFunction(n),this.functions[n.name]=i;break;case"event":i=new EvmEvent(n),this.events[n.name]=i;break;case"constructor":i=new EvmConstructor(n),this.init=i;break;default:console.log("Unknown field type",n.name,n.type)}i.contract=this.contract}}},AbiHtml.prototype.inArray=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},AbiHtml.prototype.FromRegex=function(t){for(var e,n=/(?:(function|event)\s*)(\w+)\s*\((\s*|(?:(?:,\s*|\s*)?\w+(?:\[\])? \w+\s*)+)\)((?:\s+(?!returns\s*?)(?:\w+(?:\(.+\))?))*)(?:\s+returns\s*?\((|(?:(?:,\s*|\s*)?(?:\w+(?:\[\])? )?\w+\s*)+)\))?/g,i=[];e=n.exec(t);){var a={type:e[1],name:e[2]},r=e[4].split(" ");"event"===a.type&&(a.anonymous=this.inArray(r,"anonymous")),"function"===a.type&&(a.constant=this.inArray(r,"constant")),a.inputs=this.makeInputs(e[3]),a.outputs=this.makeOutputs(e[5]),i.push(a)}return this.constructor(i),i},AbiHtml.prototype.RenderTree=function(){var t=document.createElement("div");t.innerHTML="Constructor: ";var e=this.init,n=document.createElement("ul");n.classList.add("abi","constructor","input"),e&&"inputs"in e&&(e.inputs.forEach(function(t){var e=document.createElement("li");e.classList.add("abi","constructor","input",t.type),e.innerHTML=t.type+" "+t.name,n.appendChild(e)}),t.appendChild(n));var i=document.createElement("div");i.innerHTML="Functions: ";var a=document.createElement("ul");for(name in this.functions){var r=this.functions[name],s=document.createElement("li"),o=document.createElement("span");if(o.classList.add("abi","function"),o.innerHTML=r.name,r.constant){var c=document.createElement("span");c.innerHTML=' <dfn title="Constant">&#8594;</dfn>',c.className="indexed",o.appendChild(c)}s.appendChild(o);var u=document.createElement("ul");u.classList.add("abi","function","input"),r.inputs.forEach(function(t){var e=document.createElement("li");e.classList.add("abi","function","input",t.type),e.innerHTML=t.type+" "+t.name,u.appendChild(e)}),s.appendChild(u);var p=document.createElement("ul");p.classList.add("abi","function","output"),r.outputs.forEach(function(t){var e=document.createElement("li");e.classList.add("abi","function","output"),e.innerHTML=t.type+" "+t.name,p.appendChild(e)}),s.appendChild(p),a.appendChild(s)}i.appendChild(a);var l=document.createElement("div");l.innerHTML="Events: ";var d=document.createElement("ul");for(name in this.events){var m=this.events[name],h=document.createElement("li"),f=document.createElement("span");f.classList.add("abi","event"),f.innerHTML=m.name,h.appendChild(f);var v=document.createElement("ul");v.classList.add("abi","event","input"),m.inputs.forEach(function(t){var e=document.createElement("li");if(e.classList.add("abi","event","input",t.type),e.innerHTML=t.type+" "+t.name,t.indexed){var n=document.createElement("span");n.innerHTML=' <dfn title="Indexed">&#8623;</dfn>',n.className="indexed",e.appendChild(n)}v.appendChild(e)}),h.appendChild(v),d.appendChild(h)}l.appendChild(d);var y=document.createElement("div");return y.appendChild(t),y.appendChild(i),y.appendChild(l),y},AbiHtml.prototype.makeInputs=function(t){if(!t||"string"!=typeof t||0===t.trim().length)return[];var e=[],n=t.split(",");return n.forEach(function(t){var n=t.trim().split(" "),i={type:null,name:null};switch(n.length){case 1:i.type=n[0],i.name="";break;case 2:i.type=n[0],i.name=n[1];break;case 3:i.type=n[0],i.name=n[2],"indexed"===n[1]?i.indexed=!0:i.indexed=!1}e.push(i)}),e},AbiHtml.prototype.makeOutputs=function(t){if(!t||"string"!=typeof t||0===t.trim().length)return[];var e=[],n=t.split(",");return n.forEach(function(t){var n=t.trim().split(" "),i={type:null,name:null};switch(n.length){case 1:i.type=n[0],i.name="";break;case 2:i.type=n[0],i.name=n[1]}e.push(i)}),e},AbiHtml.prototype.GetAllEvents=function(t,e,n){var i=this;this.contract.at(t.address).allEvents({fromBlock:"earliest",toBlock:"latest"},function(t,e){var a=i.events[e.event];a.err=t,a.results=e;for(var r=0;r<a.inputs.length;r++){var s=a.inputs[r];e&&"args"in e&&s.getName()in e.args&&s.setValue(e.args[s.getName()])}"function"==typeof n&&n(a)})},AbiHtml.prototype.GetEventLogs=function(t,e,n){for(var i in this.events){var a=this.events[i];e?a.Watch({address:t.to},{},n):a.Get({address:t.to},{},n)}},AbiHtml.prototype.GetConstructor=function(){return this.init},AbiHtml.prototype.GetEventLogsByName=function(t,e,n,i){this.events[t].Get(e,n,i)},AbiHtml.prototype.WatchAllEvents=function(t,e,n){for(var i in this.events){var a=this.events[i];a.StopWatching(),a.Watch(t,e,n)}},AbiHtml.prototype.GetEventByName=function(t){return t in this.events?this.events[t]:void 0},AbiHtml.prototype.GetFunction=function(t){return t in this.functions?this.functions[t]:void 0},AbiHtml.prototype.GetFunctionsSorted=function(){var t=[];for(var e in this.functions)t.push(this.functions[e]);return t.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),t},AbiHtml.prototype.GetEventsSorted=function(){var t=[];for(var e in this.events)t.push(this.events[e]);return t.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),t},AbiHtml.prototype.GetInitFunction=function(){return this.init},AbiHtml.prototype.checkReceipt=function(t,e){var n=web3.eth.getTransactionReceipt(t);if(n)e(null,n);else{var i=this;setTimeout(function(t,e){i.checkReceipt(t,e)},3e3,t,e)}},AbiHtml.prototype.checkTransaction=function(t,e){var n=web3.eth.getTransaction(t);if(n.blockHash)e(null,n);else{var i=this;setTimeout(function(t,e){i.checkTransaction(t,e)},3e3,t,e)}},AbiHtml.prototype.sendTransaction=function(t,e){web3.eth.sendTransaction(t,function(t,n){t?e(t,null):checkReceipt(n,e)})};
"use strict";var EvmConstructor=function(t){if("object"!=typeof t)return null;if(!("type"in t)||"constructor"!=t.type)return null;this.abi=t,this.name="Constructor",this.type=t.type,this.inputs=[],this.outputs=[],this.error=void 0;for(var e=0;e<t.inputs.length;e++){var n=new SolField(t.inputs[e]);this.inputs[e]=n}};EvmConstructor.prototype.makeFieldForm=function(t,e){var n=document.createElement("div");if(n.className=["constructor"].join(" "),n.id="constructor"+this.name,this.inputs.length>0){var i=document.createElement("fieldset");i.className="inputs";var r=document.createElement("legend");r.innerHTML="Inputs",i.appendChild(r),this.inputs.forEach(function(t){t.setHtmlId(["constructor",t.name,"input"].join("-")),i.appendChild(t.DefaultRenderer(!0))})}return this.inputs.length>0&&n.appendChild(i),this.outputs.length>0&&n.appendChild(fso),n};
"use strict";var EvmEvent=function(e){if("object"!=typeof e)return null;if(!("name"in e))return null;if(!("type"in e)||"event"!=e.type)return null;this.abi=e,this.name=e.name,this.type=e.type,this.anonymous=e.anonymous?e.anonymous:!1,this.inputs=[],this.error=void 0;for(var t=0;t<e.inputs.length;t++)this.inputs[t]=new SolField(e.inputs[t]);this.loadedLogs=[]};EvmEvent.prototype.GetInputByName=function(e){for(var t=0;t<this.inputs.length;t++){var n=this.inputs[t];if(n.name===e)return this.inputs[t]}},EvmEvent.prototype.StopWatching=function(){this.filter&&this.filter.stopWatching()},EvmEvent.prototype.Watch=function(e,t,n){var a=[],r={address:e.address?e.address:"",fromBlock:e.fromBlock?e.fromBlock:"latest",toBlock:e.toBlock?e.toBlock:"latest"};a.push(r),t?a.push(t):a.push({});var i=this.contract.at(r.address),o=i[this.ev.name];if(this.filter=o.apply(o,a),!this.filter)throw"Could not create filter";var s=this.abi;this.filter.watch(function(e,t){var a=new EvmEvent(s);if(e)a.error=e;else if(a.result=t,t&&"args"in t&&t.args.length>0)for(var r=0;r<a.inputs.length;r++){var i=a.inputs[r];i.name in t.args&&i.setValue(t.args[i.name])}"function"==typeof n&&n(a)})},EvmEvent.prototype.FetchLogs=function(e,t,n){var a=[];t?a.push(t):a.push({});var r={address:e.address?e.address:"",fromBlock:e.fromBlock?e.fromBlock:"earliest",toBlock:e.toBlock?e.toBlock:"latest"};a.push(r);var i=this.contract.at(r.address),o=i[this.name];if(this.filter=o.apply(o,a),this.filter){this.loadedLogs.length=0;var s=this;this.filter.get(function(e,t){for(var a=0;a<t.length;a++){var r=t[a],i=new EvmEvent(s.abi);if(e&&(i.error=e),r&&"args"in r){i.result=r;for(var o=0;o<i.inputs.length;o++){var l=i.inputs[o];l.name in r.args&&l.setValue(r.args[l.name])}}s.loadedLogs.push(i)}"function"==typeof n&&n(s.loadedLogs)})}},EvmEvent.prototype.GetLogsFiltered=function(e,t){var n=[];for(var a in this.loadedLogs){for(var r=this.loadedLogs[a],i=!0,o=0;o<r.inputs.length;o++){var s=r.inputs[o];if(s.name in e){var l=e[s.name];if(!s.compareValueOperation(l.value,l.operator)){i=!1;break}}}i&&("function"==typeof t&&t(r),n.push(r))}return n},EvmEvent.prototype.getFieldFilterValues=function(){var e={};return this.inputs.forEach(function(t){var n=document.getElementById(t.htmlId),a=document.getElementById(t.htmlId+"-operator");if(n&&n.value){var r={name:t.name,value:n.value,operator:a.value};e[t.name]=r}}),e},EvmEvent.prototype.getIndexedFilterValues=function(){var e={};return this.inputs.forEach(function(t){if(t.indexed){var n=document.getElementById(t.htmlId);n&&n.value&&(e[t.name]=n.value)}}),e},EvmEvent.prototype.makeFieldFilter=function(e){e||(e="sorter");var t=document.createElement("div");t.className=["event"].join(" "),t.id="eventTopicFilter"+this.name;var n=document.createElement("h3");if(n.innerHTML=this.name,this.inputs.length>0){var a=document.createElement("fieldset");a.className="inputs";var r=document.createElement("legend");r.innerHTML="Event topics",a.appendChild(r);for(var i=0;i<this.inputs.length;i++){var o=this.inputs[i];o.setHtmlId(["event",e,this.name].join("-"));var s=document.createElement("div");s.className="solfield",s.appendChild(o.RenderLabel());var l=document.createElement("select");l.className="comparison",l.id=o.htmlId+"-operator";var d=document.createElement("optgroup");d.label="("+o.type+")";var p=document.createElement("option");p.innerHTML="(all)",p.value="*",l.options.add(p);var u=o.operators;for(var v in u){var m=document.createElement("option");m.innerHTML=u[v],m.value=u[v],d.appendChild(m)}if(l.appendChild(d),s.appendChild(l),s.appendChild(o.RenderField(!0)),o.indexed){var h=document.createElement("span");h.innerHTML='<dfn title="Indexed topic">&#8623;</dfn>',h.className="indexed",s.appendChild(h)}a.appendChild(s)}t.appendChild(n),t.appendChild(a)}return t};
"use strict";var EvmFunction=function(t){if("object"!=typeof t)return null;if(!("name"in t))return null;if(!("type"in t)||"function"!=t.type)return null;this.abi=t,this.name=t.name,this.type=t.type,this.constant=t.constant?t.constant:!1,this.inputs=[],this.outputs=[],this.error=void 0;for(var n=0;n<t.inputs.length;n++){var e=new SolField(t.inputs[n]);this.inputs[n]=e}for(var n=0;n<t.outputs.length;n++){var e=new SolField(t.outputs[n]);this.outputs[n]=e}};EvmFunction.prototype.Call=function(t,n){for(var e=[],a=0;a<this.inputs.length;a++){var i=this.inputs[a],u=document.getElementById(i.htmlId).value;i.setValue(u),e.push(i.value)}var o={from:t.from,to:t.to,data:t.data};e.push(o);var r=this,s=function(t,e){if(t?r.error=t:delete r.error,!t)for(var a=0;a<r.outputs.length;a++){var i=r.outputs[a];i.setValue(e)}"function"==typeof n&&n(r)};e.push(s);var l=this.contract.at(o.to),p=l[this.name];p.call.apply(p,e)},EvmFunction.prototype.Transact=function(t,n){for(var e=[],a=0;a<this.inputs.length;a++){var i=this.inputs[a],u=document.getElementById(i.htmlId).value;e.push(u)}var o={from:t.from,to:t.to,gas:t.gas,gasPrice:t.gasPrice,data:t.data,value:t.value};e.push(o);var r=this.func,s=function(t,e){t&&(r.error=t),t||(r.transactionHash=e),"function"==typeof n&&n(r)};e.push(s);var l=this.contract.at(o.to),p=l[this.name];p.sendTransaction.apply(p,e)},EvmFunction.prototype.makeFieldForm=function(t,n){var e=this,a=document.createElement("div");a.className=["function"].join(" "),a.id="function"+e.name;var i=document.createElement("h3");if(i.innerHTML=e.name,a.appendChild(i),e.inputs.length>0){var u=document.createElement("fieldset");u.className="inputs";var o=document.createElement("legend");o.innerHTML="Inputs",u.appendChild(o),e.inputs.forEach(function(t){t.setHtmlId(["function",e.name,"input"].join("-")),u.appendChild(t.DefaultRenderer(!0))})}if(e.outputs.length>0){var r=document.createElement("fieldset");r.className="outputs";var o=document.createElement("legend");o.innerHTML="Outputs",r.appendChild(o),e.outputs.forEach(function(t){t.setHtmlId(["function",e.name,"output"].join("-")),r.appendChild(t.DefaultRenderer(!1))})}if(e.outputs.length>0){var s=document.createElement("button");s.type="button",s.innerHTML="Call";var l=this;s.addEventListener("click",function(){t(l)}),a.appendChild(s)}if(!e.constant){var p=document.createElement("button");p.type="button",p.innerHTML="Transact";var l=this;p.addEventListener("click",function(){n(l)}),a.appendChild(p)}return e.inputs.length>0&&a.appendChild(u),e.outputs.length>0&&a.appendChild(r),a};
var SolAddress=function(){this.base="address",this.operators=[OperatorEnum.Eq,OperatorEnum.Neq,OperatorEnum.Contain]};SolAddress.prototype.setValue=function(e){return"undefined"!=typeof e?("0x"!==e.substring(0,2)&&(e="0x"+e),42!=e.length?new Error("Address not 40 characters. Got "+(e.length-2).toString()):(this.value=e,null)):void 0},SolAddress.prototype.compareValueOperation=function(e,r){switch(r){case OperatorEnum.Neq:if(e!==this.value)return!0;break;case OperatorEnum.Eq:if(e===this.value)return!0;break;case OperatorEnum.Contain:if(this.value.indexOf(value)>-1)return!0;break;default:console.log("Unknown comparison",r)}return!1},SolAddress.prototype.DefaultRenderer=function(e,r){var t=document.createElement("input");return r&&(t.id=r),t.type="text",t.className=["logField",this.base].join(" "),t.placeholder=this.base,e||(t.className=[t.className,"readonly"].join(" "),t.readOnly=!0),this.value&&(t.value=this.value),t};
var SolBool=function(){this.base="bool",this.operators=[OperatorEnum.Eq,OperatorEnum.Neq]};SolBool.prototype.setValue=function(e){return"undefined"!=typeof e?(this.value=!!e,null):void 0},SolBool.prototype.compareValueOperation=function(e,o){switch(o){case OperatorEnum.Neq:if(e!==this.value)return!0;break;case OperatorEnum.Eq:if(e===this.value)return!0;break;default:console.log("Unknown comparison",o)}return!1},SolBool.prototype.DefaultRenderer=function(e,o){var t=document.createElement("input");return o&&(t.id=o),t.className=this.base,t.placeholder=this.base,e?t.type="checkbox":(t.type="text",t.className=[t.className,"readonly"].join(" "),t.readOnly=!0),this.value&&(t.value=this.value),t};
var SolBytes=function(e){this.size=e,this.base="bytes",this.operators=[OperatorEnum.Eq,OperatorEnum.Neq,OperatorEnum.Contain]};SolBytes.prototype.setValue=function(e){return"undefined"!=typeof e?"string"!=typeof e?new Error("Value must be string"):("0x"!==e.substring(0,2)&&(e="0x"+this.value),e.length%2!=0?new Error("Not even number of bytes"):(this.value=e,null)):void 0},SolBytes.prototype.compareValueOperation=function(e,t){switch(t){case OperatorEnum.Neq:if(e!==this.value)return!0;break;case OperatorEnum.Eq:if(e===this.value)return!0;break;case OperatorEnum.Contain:if(this.value.indexOf(value)>-1)return!0;break;default:console.log("Unknown comparison",t)}return!1},SolBytes.prototype.DefaultRenderer=function(e,t){var r=document.createElement("textarea");return t&&(r.id=t),r.rows=4,r.cols=40,r.className=[this.base,this.base+this.size].join(" "),r.placeholder=this.base+this.size,e||(r.className=[r.className,"readonly"].join(" "),r.readOnly=!0),this.value&&(r.innerHTML=this.value),r};
"use strict";var SolField=function(e,t){if("object"==typeof e){var i=this._constructor(e);i&&(this.name=e.name,this.type=e.type,this.indexed="indexed"in e?e.indexed:!1,this.anonymous="anonymous"in e?e.anonymous:!1,this.operators=i.operators,t&&i.setValue(t),i.value&&(this.value=i.value),this._field=i)}};SolField.prototype._constructor=function(e){var t=this.splitType(e.type);switch(this.typeBase=t.base,this.typeSize=t.size,t.base){case"bool":case"bool[]":return new SolBool;case"address":case"address[]":return new SolAddress;case"string":case"string[]":return new SolString(t.size);case"bytes":case"bytes[]":return new SolBytes(t.size);case"int":case"int[]":return new SolInt(t.size);case"uint":case"uint[]":return new SolUint(t.size);case"real":case"real[]":case"ureal":case"ureal[]":default:console.log("Unknown field type:",e.name,t.base,t.size)}},SolField.prototype.splitType=function(e){var t=e.match(/\d/);if(null===t)return{base:e,size:null};var i=e.indexOf(t);return{base:e.substring(0,i),size:e.substring(i,e.length)}},SolField.prototype.setValue=function(e){if("undefined"!=typeof e){var t=this._field.setValue(e);if(t)throw t;this.value=this._field.value}},SolField.prototype.setHtmlId=function(e){e&&(this.htmlId=[e.toString(),this.name].join("-"))},SolField.prototype.DefaultRenderer=function(e){var t=document.createElement("div");return t.className="solfield",t.appendChild(this.RenderLabel()),t.appendChild(this.RenderField(e)),t},SolField.prototype.RenderLabel=function(){var e=document.createElement("label");e.htmlFor=this.htmlId,e.className="name";var t=this.name;return t||(t="(returns)"),e.innerHTML=t,e},SolField.prototype.RenderField=function(e){this._field.setValue(this.value);var t=this._field.DefaultRenderer(e,this.htmlId);return t.className+=" value",t},SolField.prototype.compareValueOperation=function(e,t){if("*"===t)return!0;var i=this._field.compareValueOperation(e,t);return i};
var SolInt=function(e){this.size=e?e:"256",this.base="int",this.operators=[OperatorEnum.Eq,OperatorEnum.Neq,OperatorEnum.LT,OperatorEnum.LTEq,OperatorEnum.GT,OperatorEnum.GTEq]};SolInt.prototype.setValue=function(e){if("undefined"!=typeof e){try{var r=web3.toBigNumber(e)}catch(t){return t}return this.value=r,null}},SolInt.prototype.compareValueOperation=function(e,r){var t=this.value.comparedTo(e);switch(r){case OperatorEnum.Neq:if(0!==t)return!0;break;case OperatorEnum.Eq:if(0===t)return!0;break;case OperatorEnum.LT:if(-1===t)return!0;break;case OperatorEnum.LTEq:if(-1===t||0===t)return!0;break;case OperatorEnum.GT:if(1===t)return!0;break;case OperatorEnum.GTEq:if(1===t||0===t)return!0;break;default:console.log("Unknown comparison",r)}return!1},SolInt.prototype.DefaultRenderer=function(e,r){var t=document.createElement("input");return r&&(t.id=r),t.type="input",t.className=this.base,t.placeholder=this.base,this.size&&(t.className=[t.className,this.base+this.size].join(" "),t.placeholder+=this.size),e||(t.className=[t.className,"readonly"].join(" "),t.readOnly=!0),this.value&&(t.value=this.value),t};
var SolString=function(e){this.size=e,this.base="string",this.operators=[OperatorEnum.Eq,OperatorEnum.Neq,OperatorEnum.Contain]};SolString.prototype.setValue=function(e){return"undefined"!=typeof e?"string"!=typeof e?new Error("Must be string"):(this.value=e,null):void 0},SolString.prototype.compareValueOperation=function(e,t){switch(t){case OperatorEnum.Neq:if(e!==this.value)return!0;break;case OperatorEnum.Eq:if(e===this.value)return!0;break;case OperatorEnum.Contain:if(this.value.indexOf(value)>-1)return!0;break;default:console.log("Unknown comparison",t)}return!1},SolString.prototype.DefaultRenderer=function(e,t){var r=document.createElement("textarea");return t&&(r.id=t),r.rows=4,r.cols=40,r.className=[this.base,this.base+this.size].join(" "),r.placeholder=this.base+this.size,e||(r.className=[r.className,"readonly"].join(" "),r.readOnly=!0),this.value&&(r.innerHTML=this.value),r};
var SolUint=function(e){this.size=e?e:"256",this.base="uint",this.operators=[OperatorEnum.Eq,OperatorEnum.Neq,OperatorEnum.LT,OperatorEnum.LTEq,OperatorEnum.GT,OperatorEnum.GTEq]};SolUint.prototype.setValue=function(e){if("undefined"!=typeof e){try{var r=web3.toBigNumber(e)}catch(t){return t}return this.value=r,null}},SolUint.prototype.DefaultRenderer=function(e,r){var t=document.createElement("input");return r&&(t.id=r),t.type="input",t.className=this.base,t.placeholder=this.base,this.size&&(t.className=[t.className,this.base+this.size].join(" "),t.placeholder+=this.size),e||(t.className=[t.className,"readonly"].join(" "),t.readOnly=!0),this.value&&(t.value=this.value),t},SolUint.prototype.compareValueOperation=function(e,r){var t=this.value.comparedTo(e);switch(r){case OperatorEnum.Neq:if(0!==t)return!0;break;case OperatorEnum.Eq:if(0===t)return!0;break;case OperatorEnum.LT:if(-1===t)return!0;break;case OperatorEnum.LTEq:if(-1===t||0===t)return!0;break;case OperatorEnum.GT:if(1===t)return!0;break;case OperatorEnum.GTEq:if(1===t||0===t)return!0;break;default:console.log("Unknown comparison",r)}return!1};